"use strict";function e(){return(e=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0});var r={paragraph:"p",block_quote:"blockquote",code_block:"code_block",link:"a",ul_list:"ul",ol_list:"ol",listItem:"li",heading:{1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"},emphasis_mark:"italic",strong_mark:"bold",delete_mark:"strikethrough",inline_code_mark:"code",thematic_break:"hr",image:"img"};function t(i,l){var c,u,o,d,s,h,p,g,v,y,k,m=e({},r,null==l?void 0:l.nodeTypes,{heading:e({},r.heading,null==l||null===(c=l.nodeTypes)||void 0===c?void 0:c.heading)}),f=null!==(u=null==l?void 0:l.linkDestinationKey)&&void 0!==u?u:"link",_=null!==(o=null==l?void 0:l.imageSourceKey)&&void 0!==o?o:"link",b=null!==(d=null==l?void 0:l.imageCaptionKey)&&void 0!==d?d:"caption",x=[{text:""}],T=i.children;switch(T&&Array.isArray(T)&&T.length>0&&(x=T.flatMap((function(r){return t(e({},r,{ordered:i.ordered||!1}),l)}))),i.type){case"heading":return{type:m.heading[i.depth||1],children:x};case"list":return{type:i.ordered?m.ol_list:m.ul_list,children:x};case"listItem":return{type:m.listItem,children:x};case"paragraph":return{type:m.paragraph,children:x};case"link":return(s={type:m.link})[f]=i.url,s.children=x,s;case"image":return(h={type:m.image,children:[{text:""}]})[_]=i.url,h[b]=i.alt,h;case"blockquote":return{type:m.block_quote,children:x};case"code":return{type:m.code_block,language:i.lang,children:[{text:i.value}]};case"html":var j;return null!==(p=i.value)&&void 0!==p&&p.includes("<br>")?{break:!0,type:m.paragraph,children:[{text:(null===(j=i.value)||void 0===j?void 0:j.replace(/<br>/g,""))||""}]}:{type:"paragraph",children:[{text:i.value||""}]};case"emphasis":return e(((g={})[m.emphasis_mark]=!0,g),n(x),a(x));case"strong":return e(((v={})[m.strong_mark]=!0,v),n(x),a(x));case"delete":return e(((y={})[m.delete_mark]=!0,y),n(x),a(x));case"inlineCode":return e(((k={})[m.inline_code_mark]=!0,k.text=i.value,k),a(x));case"thematicBreak":return{type:m.thematic_break,children:[{text:""}]};case"break":return{text:"  \n"};case"text":default:return{text:i.value||""}}}var n=function(e){return{text:e.map((function(e){return null==e?void 0:e.text})).join("")}};function a(e){return e.reduce((function(e,r){return Object.keys(r).forEach((function(t){"children"!==t&&"type"!==t&&"text"!==t&&(e[t]=r[t])})),e}),{})}var i=function(e){return"string"==typeof e.text},l=["thematic_break","image"];function c(e,r){var t=e.trim(),n=t,a=""+r+n+u(r);if(n.length===e.length)return a;var i=r+n+u(r);return e.replace(t,i)}var u=function(e){return e.split("").reverse().join("")};exports.default=function(e){this.Compiler=function(r){return r.children.map((function(r){return t(r,e)}))}},exports.defaultNodeTypes=r,exports.deserialize=t,exports.serialize=function t(n,a){var u;void 0===a&&(a={nodeTypes:r});var o=a.nodeTypes,d=void 0===o?r:o,s=a.ignoreParagraphNewline,h=void 0!==s&&s,p=a.listDepth,g=void 0===p?0:p,v=n.text||"",y=n.type||"",k=e({},r,d,{heading:e({},r.heading,d.heading)}),m=[k.ul_list,k.ol_list],f=v;if(i(n)||(f=n.children.map((function(r){var a=!i(r)&&m.includes(r.type||""),l=m.includes(n.type||""),c=!1;return!i(n)&&Array.isArray(n.children)&&(c=n.children.some((function(e){return!i(e)&&e.type===k.link}))),t(e({},r,{parentType:y}),{nodeTypes:k,ignoreParagraphNewline:(h||a||l||c)&&!r.break,listDepth:m.includes(r.type||"")?g+1:g})})).join("")),h||""!==v&&"\n"!==v||n.parentType!==k.paragraph||y===k.image||(y=k.paragraph,f="\n"),""!==f||l.find((function(e){return k[e]===y})))switch("\n"!==f&&i(n)&&(n.strikethrough&&n.bold&&n.italic?f=c(f,"~~***"):n.bold&&n.italic?f=c(f,"***"):(n.bold&&(f=c(f,"**")),n.italic&&(f=c(f,"_")),n.strikethrough&&(f=c(f,"~~")),n.code&&(f=c(f,"`")))),y){case k.heading[1]:return"# "+f;case k.heading[2]:return"## "+f;case k.heading[3]:return"### "+f;case k.heading[4]:return"#### "+f;case k.heading[5]:return"##### "+f;case k.heading[6]:return"###### "+f;case k.block_quote:return"> "+f+"\n";case k.code_block:return"```"+(n.language||"")+"\n"+f+"\n```\n";case k.link:return"["+f+"]("+(n.url||"")+")";case k.image:return"!["+(null!==(u=n.caption)&&void 0!==u?u:"")+"]("+(n.url||"")+")";case k.ul_list:case k.ol_list:return"\n"+f+"\n";case k.listItem:for(var _=n&&n.parentType===k.ol_list,b=1===n.children.length&&"lic"===n.children[0].type&&i(n.children[0].children[0]),x="",T=0;g>T;T++)x+=_?"   ":"  ";return x+(_?"1.":"-")+" "+f+(b?"\n":"");case k.paragraph:return f.replaceAll("\n","  \n")+"\n";case k.thematic_break:return"\n---\n";default:return f.replaceAll("\n","  \n")}};
//# sourceMappingURL=remark-plate.cjs.production.min.js.map
