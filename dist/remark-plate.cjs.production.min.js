"use strict";function e(){return(e=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0});var r={paragraph:"p",block_quote:"blockquote",code_block:"code_block",link:"a",ul_list:"ul",ol_list:"ol",listItem:"li",heading:{1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"},emphasis_mark:"italic",strong_mark:"bold",delete_mark:"strikethrough",inline_code_mark:"code",thematic_break:"hr",image:"img",mention:"mention"};function n(a,l){var c,u,o,s,d,h,p,g,v,m,y,k,f=e({},r,null==l?void 0:l.nodeTypes,{heading:e({},r.heading,null==l||null===(c=l.nodeTypes)||void 0===c?void 0:c.heading)}),_=null!==(u=null==l?void 0:l.linkDestinationKey)&&void 0!==u?u:"link",b=null!==(o=null==l?void 0:l.imageSourceKey)&&void 0!==o?o:"link",x=null!==(s=null==l?void 0:l.imageCaptionKey)&&void 0!==s?s:"caption",T=[{text:""}],j=a.children;switch(j&&Array.isArray(j)&&j.length>0&&(T=j.flatMap((function(r){return n(e({},r,{ordered:a.ordered||!1}),l)}))),a.type){case"heading":return{type:f.heading[a.depth||1],children:T};case"list":return{type:a.ordered?f.ol_list:f.ul_list,children:T};case"listItem":return{type:f.listItem,children:T};case"paragraph":return{type:f.paragraph,children:T};case"link":return(d={type:f.link})[_]=a.url,d.children=T,d;case"image":return(h={type:f.image,children:[{text:""}]})[b]=a.url,h[x]=a.alt,h;case"blockquote":return{type:f.block_quote,children:T};case"code":return{type:f.code_block,language:a.lang,children:[{text:a.value}]};case"html":var A;return null!==(p=a.value)&&void 0!==p&&p.includes("<br>")?{break:!0,type:f.paragraph,children:[{text:(null===(A=a.value)||void 0===A?void 0:A.replace(/<br>/g,""))||""}]}:{type:"paragraph",children:[{text:a.value||""}]};case"emphasis":return e(((g={})[f.emphasis_mark]=!0,g),t(T),i(T));case"strong":return e(((v={})[f.strong_mark]=!0,v),t(T),i(T));case"delete":return e(((m={})[f.delete_mark]=!0,m),t(T),i(T));case"mention":return e(((y={})[f.mention]=!0,y),t(T),i(T));case"inlineCode":return e(((k={})[f.inline_code_mark]=!0,k.text=a.value,k),i(T));case"thematicBreak":return{type:f.thematic_break,children:[{text:""}]};case"break":return{text:"  \n"};case"text":default:return{text:a.value||""}}}var t=function(e){return{text:e.map((function(e){return null==e?void 0:e.text})).join("")}};function i(e){return e.reduce((function(e,r){return Object.keys(r).forEach((function(n){"children"!==n&&"type"!==n&&"text"!==n&&(e[n]=r[n])})),e}),{})}var a=function(e){return"string"==typeof e.text||"string"==typeof e.value},l=["thematic_break","image"];function c(e,r){var n=e.trim(),t=n,i=""+r+t+u(r);if(t.length===e.length)return i;var a=r+t+u(r);return e.replace(n,a)}var u=function(e){return e.split("").reverse().join("")};exports.default=function(e){this.Compiler=function(r){return r.children.map((function(r){return n(r,e)}))}},exports.defaultNodeTypes=r,exports.deserialize=n,exports.serialize=function n(t,i){var u;void 0===i&&(i={nodeTypes:r});var o=i.nodeTypes,s=void 0===o?r:o,d=i.ignoreParagraphNewline,h=void 0!==d&&d,p=i.listDepth,g=void 0===p?0:p,v=t.text||t.value||"",m=t.type||"",y=e({},r,s,{heading:e({},r.heading,s.heading)}),k=[y.ul_list,y.ol_list],f=v;if(a(t)||(f=t.children.map((function(r){var i=!a(r)&&k.includes(r.type||""),l=k.includes(t.type||""),c=!1;return!a(t)&&Array.isArray(t.children)&&(c=t.children.some((function(e){return!a(e)&&e.type===y.link}))),n(e({},r,{parentType:m}),{nodeTypes:y,ignoreParagraphNewline:(h||i||l||c)&&!r.break,listDepth:k.includes(r.type||"")?g+1:g})})).join("")),h||""!==v&&"\n"!==v||t.parentType!==y.paragraph||m===y.image||(m=y.paragraph,f="\n"),""!==f||l.find((function(e){return y[e]===m})))switch("\n"!==f&&a(t)&&(t.mention?f=c(f,"**"):t.strikethrough&&t.bold&&t.italic?f=c(f,"~~***"):t.bold&&t.italic?f=c(f,"***"):(t.bold&&(f=c(f,"**")),t.italic&&(f=c(f,"_")),t.strikethrough&&(f=c(f,"~~")),t.code&&(f=c(f,"`")))),m){case y.heading[1]:return"# "+f;case y.heading[2]:return"## "+f;case y.heading[3]:return"### "+f;case y.heading[4]:return"#### "+f;case y.heading[5]:return"##### "+f;case y.heading[6]:return"###### "+f;case y.block_quote:return"> "+f+"\n";case y.code_block:return"```"+(t.language||"")+"\n"+f+"\n```\n";case y.link:return"["+f+"]("+(t.url||"")+")";case y.image:return"!["+(null!==(u=t.caption)&&void 0!==u?u:"")+"]("+(t.url||"")+")";case y.ul_list:case y.ol_list:return"\n"+f+"\n";case y.listItem:for(var _=t&&t.parentType===y.ol_list,b=1===t.children.length&&"lic"===t.children[0].type&&a(t.children[0].children[0]),x="",T=0;g>T;T++)x+=_?"   ":"  ";return x+(_?"1.":"-")+" "+f+(b?"\n":"");case y.paragraph:return f.replaceAll("\n","  \n")+"\n";case y.thematic_break:return"\n---\n";case y.mention:return"**"+f+"**";default:return f.replaceAll("\n","  \n")}};
//# sourceMappingURL=remark-plate.cjs.production.min.js.map
